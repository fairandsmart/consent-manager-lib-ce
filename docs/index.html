<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@fairandsmart/consents-ce</title><meta name="description" content="Documentation for @fairandsmart/consents-ce"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@fairandsmart/consents-ce</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>@fairandsmart/consents-ce</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#fairampsmart-right-consents-typescript-support" id="fairampsmart-right-consents-typescript-support" style="color: inherit; text-decoration: none;">
  <h1>Fair&amp;Smart Right Consents TypeScript support</h1>
</a>
<p>This project implements TypeScript definitions and API helpers for the <a href="https://cmback.dev.env.fairandsmart.tech/swagger-ui/">Fair&amp;Smart Right Consents API</a>. It&#39;s meant for use in <a href="https://github.com/fairandsmart/consent-manager-lib-ce">Right Consents Front-end</a>, but should be general enough to use in any project. The code is maintained and based on the <a href="https://github.com/fairandsmart/consent-manager-back">Right Consents Back-end</a> API resources and models, to be as close as possible to the true representation of the resources.</p>

<a href="#install" id="install" style="color: inherit; text-decoration: none;">
  <h1>Install</h1>
</a>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">i</span><span class="hl-1"> @</span><span class="hl-0">fairandsmart</span><span class="hl-1">/</span><span class="hl-0">consents</span><span class="hl-1">-</span><span class="hl-0">ce</span>
</code></pre>

<a href="#interfaces-and-enums" id="interfaces-and-enums" style="color: inherit; text-decoration: none;">
  <h1>Interfaces and Enums</h1>
</a>
<p>All the interface type definitions and enums are for type info only - everything will compile out. Only the API helpers produce real JavaScript output. You can import types from each service defined on <a href="https://cmback.dev.env.fairandsmart.tech/swagger-ui/">the API</a>:</p>
<pre><code class="language-typescript"><span class="hl-2">import</span><span class="hl-1"> { </span><span class="hl-0">ModelVersionDtoLight</span><span class="hl-1">, </span><span class="hl-0">ModelsResource</span><span class="hl-1"> } </span><span class="hl-2">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@fairandsmart/consents-ce/models&#39;</span><span class="hl-1">;</span>
</code></pre>

<a href="#api-helpers" id="api-helpers" style="color: inherit; text-decoration: none;">
  <h1>API Helpers</h1>
</a>
<p>In addition to the types, there are also simple helper functions for each API endpoint. They define the inputs and outputs to that endpoint, and will call a user-provided function with HTTP request info that you can then use to make an HTTP request. This pattern was used so the API helpers could provide full type information. These helpers are not a full API client - they assist in building one. An example:</p>
<pre><code class="language-typescript"><span class="hl-2">import</span><span class="hl-1"> { </span><span class="hl-0">RcHttpClientConfig</span><span class="hl-1"> } </span><span class="hl-2">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@fairandsmart/consents-ce&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-5">http</span><span class="hl-1">(</span><span class="hl-0">config</span><span class="hl-1">: </span><span class="hl-6">RcHttpClientConfig</span><span class="hl-1">): </span><span class="hl-6">Observable</span><span class="hl-1">&lt;</span><span class="hl-6">ModelEntryDto</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    </span><span class="hl-7">// fill in the API key, handle OAuth, etc., then make an HTTP request using the config.</span><br/><span class="hl-1">    </span><span class="hl-2">return</span><span class="hl-1"> </span><span class="hl-5">fromFetch</span><span class="hl-1">(</span><span class="hl-0">config</span><span class="hl-1">.</span><span class="hl-0">url</span><span class="hl-1">, ...);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-7">// Use either as an observable</span><br/><br/><span class="hl-0">ModelsResource</span><span class="hl-1">.</span><span class="hl-5">getEntry</span><span class="hl-1">(</span><span class="hl-0">entryId</span><span class="hl-1">).</span><span class="hl-5">subscribe</span><span class="hl-1">((</span><span class="hl-0">modelEntry</span><span class="hl-1">: </span><span class="hl-6">ModelEntryDto</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    ...  </span><br/><span class="hl-1">});</span><br/><br/><span class="hl-7">// ... or a promise using the .toPromise method</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">modelEntry</span><span class="hl-1">: </span><span class="hl-6">ModelEntryDto</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">ModelsResource</span><span class="hl-1">.</span><span class="hl-5">getEntry</span><span class="hl-1">(</span><span class="hl-0">entryId</span><span class="hl-1">).</span><span class="hl-5">toPromise</span><span class="hl-1">();</span>
</code></pre>
<p>Note that the API Helpers all return Observables and not promises. Feel free to adapt the behavior as you see fit.</p>
<p>To setup the helpers properly, see the Initialization section below.</p>

<a href="#initialization" id="initialization" style="color: inherit; text-decoration: none;">
  <h1>Initialization</h1>
</a>
<p><em>Note: this is not required if you only want to use the library for type descriptions</em></p>
<p>If you wish to use the API helpers, you need to initialize the library in your project:</p>
<pre><code class="language-typescript"><span class="hl-2">import</span><span class="hl-1"> { </span><span class="hl-0">RightConsents</span><span class="hl-1"> } </span><span class="hl-2">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@fairandsmart/consents-ce&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">RightConsents</span><span class="hl-1">.</span><span class="hl-5">init</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-0">apiRoot:</span><span class="hl-1"> </span><span class="hl-3">&#39;http://localhost:4287&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">httpClient:</span><span class="hl-1"> </span><span class="hl-0">myCustomHttpClient</span><span class="hl-1"> </span><span class="hl-7">// see API Helpers for more details</span><br/><span class="hl-1">})</span>
</code></pre>
<p>You need to provide the endpoint at which the API is available, and a custom HttpClient to handle all the requests.</p>

<a href="#imports" id="imports" style="color: inherit; text-decoration: none;">
  <h1>Imports</h1>
</a>
<p>It is possible to import all services from <code>@fairandsmart/consent-manager</code> directly, but it&#39;s better to use the direct import:</p>
<pre><code class="language-typescript"><span class="hl-7">// good</span><br/><span class="hl-2">import</span><span class="hl-1"> { </span><span class="hl-0">getEntry</span><span class="hl-1"> } </span><span class="hl-2">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@fairandsmart/consents-ce/models&#39;</span><span class="hl-1">;</span><br/><span class="hl-5">getEntry</span><span class="hl-1">(...);</span><br/><br/><span class="hl-7">// works, but not as good. Use for disambiguity if needed</span><br/><span class="hl-2">import</span><span class="hl-1"> { </span><span class="hl-0">ModelsResources</span><span class="hl-1"> } </span><span class="hl-2">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@fairandsmart/consents-ce&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">ModelsResources</span><span class="hl-1">.</span><span class="hl-5">getEntry</span><span class="hl-1">(...);</span>
</code></pre>

<a href="#model-helpers" id="model-helpers" style="color: inherit; text-decoration: none;">
  <h1>Model Helpers</h1>
</a>
<p>Some imports also contains helpers for parsing and interpreting the resources:</p>
<pre><code class="language-typescript"><span class="hl-2">import</span><span class="hl-1"> { </span><span class="hl-0">map</span><span class="hl-1"> } </span><span class="hl-2">from</span><span class="hl-1"> </span><span class="hl-3">&#39;rxjs&#39;</span><span class="hl-1">;</span><br/><span class="hl-2">import</span><span class="hl-1"> { </span><span class="hl-0">ModelEntryDto</span><span class="hl-1">, </span><span class="hl-0">ModelEntryHelper</span><span class="hl-1">, </span><span class="hl-0">getEntry</span><span class="hl-1"> } </span><span class="hl-2">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@fairandsmart/consents-ce/models&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">getEntry</span><span class="hl-1">(</span><span class="hl-0">modelId</span><span class="hl-1">).</span><span class="hl-5">pipe</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-5">map</span><span class="hl-1">((</span><span class="hl-0">entry</span><span class="hl-1">: </span><span class="hl-6">ModelEntryDto</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-0">ModelEntryHelper</span><span class="hl-1">.</span><span class="hl-5">getActiveVersion</span><span class="hl-1">(</span><span class="hl-0">entry</span><span class="hl-1">))</span><br/><span class="hl-1">).</span><span class="hl-5">subscribe</span><span class="hl-1">((</span><span class="hl-0">activeVersion</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">// ModelEntryHelper is an object with static methods to help you parse the entry. </span><br/><span class="hl-1">    </span><span class="hl-7">// In this example, you can find the active version of a model</span><br/><span class="hl-1">    ... </span><br/><span class="hl-1">});</span>
</code></pre>

<a href="#build" id="build" style="color: inherit; text-decoration: none;">
  <h1>Build</h1>
</a>
<pre><code><span class="hl-1"># </span><span class="hl-0">build</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">run</span><span class="hl-1"> </span><span class="hl-0">build</span><br/><span class="hl-1"># </span><span class="hl-0">pack</span><span class="hl-1"> </span><span class="hl-0">for</span><span class="hl-1"> </span><span class="hl-0">local</span><span class="hl-1"> </span><span class="hl-2">import</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">run</span><span class="hl-1"> </span><span class="hl-0">pack</span><br/><span class="hl-1"># </span><span class="hl-0">install</span><span class="hl-1"> </span><span class="hl-0">local</span><span class="hl-1"> </span><span class="hl-0">version</span><span class="hl-1"> </span><span class="hl-0">in</span><span class="hl-1"> </span><span class="hl-0">a</span><span class="hl-1"> </span><span class="hl-0">different</span><span class="hl-1"> </span><span class="hl-0">project</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">i</span><span class="hl-1"> {</span><span class="hl-0">lib</span><span class="hl-1">-</span><span class="hl-0">repository</span><span class="hl-1">}/</span><span class="hl-0">lib</span><span class="hl-1">/</span><span class="hl-0">fairandsmart</span><span class="hl-1">-</span><span class="hl-0">consents</span><span class="hl-1">-</span><span class="hl-0">ce</span><span class="hl-1">-{</span><span class="hl-0">VERSION</span><span class="hl-1">}.</span><span class="hl-0">tgz</span>
</code></pre>

<a href="#contribute" id="contribute" style="color: inherit; text-decoration: none;">
  <h1>Contribute</h1>
</a>
<ul>
<li>Create a branch for your work (PRD-XXX)</li>
<li>Upgrade the version in the package-lib.json</li>
<li>Add your work</li>
<li>Run <code>.build.sh</code> and push </li>
<li>Create a new merge request</li>
</ul>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li><li class=" tsd-kind-namespace"><a href="modules/ConsentsResource.html">Consents<wbr/>Resource</a></li><li class=" tsd-kind-namespace"><a href="modules/KeysResource.html">Keys<wbr/>Resource</a></li><li class=" tsd-kind-namespace"><a href="modules/ModelsResource.html">Models<wbr/>Resource</a></li><li class=" tsd-kind-namespace"><a href="modules/ReceiptsResource.html">Receipts<wbr/>Resource</a></li><li class=" tsd-kind-namespace"><a href="modules/RecordsResource.html">Records<wbr/>Resource</a></li><li class=" tsd-kind-namespace"><a href="modules/StatsResource.html">Stats<wbr/>Resource</a></li><li class=" tsd-kind-namespace"><a href="modules/SubjectsResource.html">Subjects<wbr/>Resource</a></li><li class=" tsd-kind-namespace"><a href="modules/SystemResource.html">System<wbr/>Resource</a></li><li class=" tsd-kind-namespace"><a href="modules/TokensResource.html">Tokens<wbr/>Resource</a></li><li class=" tsd-kind-namespace"><a href="modules/UsersResource.html">Users<wbr/>Resource</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-class"><a href="classes/ConsentCollector.html" class="tsd-kind-icon">Consent<wbr/>Collector</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/CollectionPage.html" class="tsd-kind-icon">Collection<wbr/>Page</a></li><li class="tsd-kind-interface"><a href="interfaces/RCApiOptions.html" class="tsd-kind-icon">RCApi<wbr/>Options</a></li><li class="tsd-kind-interface"><a href="interfaces/RcHttpClientConfig.html" class="tsd-kind-icon">Rc<wbr/>Http<wbr/>Client<wbr/>Config</a></li><li class="tsd-kind-type-alias"><a href="modules.html#RcHttpClient" class="tsd-kind-icon">Rc<wbr/>Http<wbr/>Client</a></li><li class="tsd-kind-type-alias"><a href="modules.html#SortDirection" class="tsd-kind-icon">Sort<wbr/>Direction</a></li><li class="tsd-kind-variable"><a href="modules.html#RightConsents" class="tsd-kind-icon">Right<wbr/>Consents</a></li><li class="tsd-kind-variable"><a href="modules.html#version" class="tsd-kind-icon">version</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#defaultHttpClient" class="tsd-kind-icon">default<wbr/>Http<wbr/>Client</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>